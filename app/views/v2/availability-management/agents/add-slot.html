{% extends "layouts/main.html" %}

{% block pageTitle %}
Create availability - GOV.UK prototype
{% endblock %}

{% block header %}
  {% include "includes/internal-header.html" %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row" style="margin-top: -40px;">
    <div class="govuk-grid-column-two-thirds">
      <a href="amy-gill-availability" class="govuk-back-link">Back</a>

      <main class="govuk-main-wrapper govuk-main-wrapper--auto-spacing" id="main-content" role="main">
        <form class="form" action="check-your-answers" method="post">
          <h1 class="govuk-heading-l">
            Create availability slot
          </h1>

          <br>
          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" role="group">

           <div class="govuk-form-group">
              <label class="govuk-label govuk-label--m" for="custom-title">
               Availability slot title (optional)
              </label>
              <div id="custom-title-hint" class="govuk-hint">
               Must be less than 20 characters
              </div>
              <input class="govuk-input govuk-input--width-20" id="custom-title" name="customTitle" type="text" aria-describedby="custom-title-hint" maxlength="20">
            
            </fieldset>
            </div>
          <div class="govuk-form-group">
          

            <fieldset class="govuk-fieldset" role="group">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                <h2 class="govuk-fieldset__heading">
                  Date
                </h2>
              </legend>

              <div id="date-hint" class="govuk-hint">
                For example, 15 3 2023
              </div>

              <div class="date-wrapper"> 
                <div class="date-start"> 
                  <div class="govuk-date-input" id="start-date">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                      <label class="govuk-label" for="address-line-1">
                        Start date
                      </label>
                    </legend>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="start-date-day">
                          Day
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="start-date-day" name="start-date-day" type="text" inputmode="numeric">
                      </div>
                    </div>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="start-date-month">
                          Month
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="start-date-month" name="start-date-month" type="text" inputmode="numeric">
                      </div>
                    </div>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="start-date-year">
                          Year
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="start-date-year" name="start-date-year" type="text" inputmode="numeric">
                      </div>
                    </div>

                    <div class="cal-square-placeholder"><img src="/public/images/cal-icon.png" style="width:30px;height:30px;padding-top:3px; padding-left: 3px;"></div>
                  </div>
                </div>

                <div class="date-end"> 
                  <div class="govuk-date-input" id="end-date">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                      <label class="govuk-label" for="address-line-1">
                        End date
                      </label>
                    </legend>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="end-date-day">
                          Day
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="end-date-day" name="end-date-day" type="text" inputmode="numeric">
                      </div>
                    </div>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="end-date-month">
                          Month
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="end-date-month" name="end-date-month" type="text" inputmode="numeric">
                      </div>
                    </div>

                    <div class="govuk-date-input__item">
                      <div class="govuk-form-group">
                        <label class="govuk-label govuk-date-input__label" for="end-date-year">
                          Year
                        </label>

                        <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="end-date-year" name="end-date-year" type="text" inputmode="numeric">
                      </div>
                    </div>

                    <div class="cal-square-placeholder"><img src="/public/images/cal-icon.png" style="width:30px;height:30px;padding-top:3px; padding-left: 3px;"></div>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" role="group" aria-describedby="start-date-hint">
              <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                <h2 class="govuk-fieldset__heading">
                  Available time
                </h2>
              </legend>

              <div id="time-hint" class="govuk-hint">
                Select all that apply
              </div>

              <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                  
                  <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                   
                    <div class="govuk-checkboxes__item">
                      <input class="govuk-checkboxes__input" id="member-2" name="member" type="checkbox" value="Amy Gill">
                      <label class="govuk-label govuk-checkboxes__label" for="member-2">
                        Morning (9am - 12pm)
                      </label>
                    </div>
                    <div class="govuk-checkboxes__item">
                      <input class="govuk-checkboxes__input" id="member-3" name="member" type="checkbox" value="Benjamin marshall">
                      <label class="govuk-label govuk-checkboxes__label" for="member-3">
                       Afternoon (1pm - 5pm)
                      </label>
                    </div>
                   
                 
  
                  
                  </div>
                </fieldset>
              </div>


            </fieldset>
          </div>

      <!--   <p style="margin-bottom:50px;"><a href="add-slot2" >Add another available time</a></p>-->

          <button class="govuk-button" data-module="govuk-button">Continue</button>
        </form>
      </main>
    </div>
  </div>

  <div id="date-picker" class="date-picker date-picker__team-view-instance print-hide" style="position: absolute; display: none;">
    <div class="date-picker__controls govuk-visually-hidden">
      <input id="date-picker" class="form-control govuk-visually-hidden" name="Date" type="hidden">

      <button class="date-picker__button" type="button">Select date</button>
    </div>

    <div class="date-picker__container date-picker__non-toggle" role="dialog" aria-label="October 2022">
      <div class="date-picker__inner">
        <li class="moj-pagination__item  moj-pagination__item--prev" style="float: left">
          <a class="moj-pagination__link " href=" "> </a>
        </li>

        <div class="month date-picker__title">September 2023</div>

        <li class="moj-pagination__item  moj-pagination__item--next" style="float: right">
          <a class="moj-pagination__link" href=" "><span class="govuk-visually-hidden"> Next month</span></a>
        </li>
      </div>

      <table class="date-picker__table" role="application">
        <tbody>
          <tr>
            <th class="date-picker__cell" title="Monday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">M</span></th>
            <th class="date-picker__cell" title="Tuesday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">T</span></th>
            <th class="date-picker__cell" title="Wednesday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">W</span></th>
            <th class="date-picker__cell" title="Thursday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">T</span></th>
            <th class="date-picker__cell" title="Friday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">F</span></th>
            <th class="date-picker__cell" title="Saturday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">S</span></th>
            <th class="date-picker__cell" title="Sunday" role="presentation" scope="col"><span class="date-picker__cell--span" aria-hidden="true">S</span></th>
          </tr>
        </tbody>

        <tbody>
          <tr class="date-picker__table-row ">
            <td class="date-picker__cell date-picker__inactive-date"><span class="date-picker__cell--span" tabindex="-1" aria-hidden="true">29</span></td>
            <td class="date-picker__cell date-picker__inactive-date"><span class="date-picker__cell--span" tabindex="-1" aria-hidden="true">30</span></td>
            <td class="date-picker__cell date-picker__inactive-date"><span class="date-picker__cell--span" tabindex="-1" aria-hidden="true">31</span></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">1</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">2</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">3</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">4</button></td>
          </tr>

          <tr class="date-picker__table-row ">
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">5</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">6</button></td>
            <!-- style="border: 3px solid #0b0c0c; background-color: #1f5ea5;"  -->
            <!-- style="color: #fff;" -->
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">7</button></td>   
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">8</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">9</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">10</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">11</button></td>
          </tr>

          <tr class="date-picker__table-row ">
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">12</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">13</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">14</button></td>   
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">15</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">16</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">17</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">18</button></td>
          </tr>

          <tr class="date-picker__table-row ">
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">19</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">20</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">21</button></td>   
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">22</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">23</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">24</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">25</button></td>
          </tr>

          <tr class="date-picker__table-row ">
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">26</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">27</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">28</button></td>   
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">29</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">30</button></td>
            <td class="date-picker__cell date-picker__selectable-date"><button class="date-picker__link" tabindex="-1">31</button></td>
            <td class="date-picker__cell date-picker__inactive-date"><span class="date-picker__cell--span" tabindex="-1" aria-hidden="true">1</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}

{% block pageScripts %}
  <script>
    const calSquarePlaceholders = Array.from(document.getElementsByClassName("cal-square-placeholder"));
    const datePicker = document.getElementById("date-picker");

    let hidden = true;
    let visible = null;

    calSquarePlaceholders.forEach(function (element) {
      element.addEventListener("click", function (event) {
        if (hidden) {
          const x = event.clientX;
          const y = event.clientY;
  
          const left = (x + 45) + "px";
          const top = (y - 138) + "px";
  
          datePicker.style.left = left;
          datePicker.style.top = top;
  
          datePicker.style.display = "block";

          visible = element.parentNode.id;
        } else {
          datePicker.style.display = "none";

          visible = null;
        }

        hidden = !hidden;

        event.preventDefault();
      })
    });

    const datePickerLinks = Array.from(document.getElementsByClassName("date-picker__link"));

    datePickerLinks.forEach(function (element) {
      element.addEventListener("click", function (event) {
        const day = document.getElementById(visible + "-day");
        const month = document.getElementById(visible + "-month");
        const year = document.getElementById(visible + "-year");

        day.value = event.target.innerText;
        month.value = '9';
        year.value = '2023';

        const datePicker = document.getElementById("date-picker");

        datePicker.style.display = "none";

        visible = null;

        hidden = !hidden;        
      })
    })
  </script>
{% endblock %}
